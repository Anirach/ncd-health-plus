(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{40266:function(e,t,n){Promise.resolve().then(n.bind(n,31770))},69076:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});let s=(0,n(39763).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]])},31770:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(57437),l=n(2265),a=n(34768),i=n(79820),r=n(12381),c=n(7463),d=n(39763);let o=(0,d.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),u=(0,d.Z)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),x=(0,d.Z)("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var h=n(69076);let m=(0,d.Z)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),f={CVD:"#EF4444",T2DM:"#3B82F6",CKD:"#22C55E",Shared:"#A855F7",Intervention:"#F59E0B"};function y(){let[e,t]=(0,l.useState)(!1),[n,d]=(0,l.useState)(new Set(["CVD","T2DM","CKD","Shared","Intervention"])),[y,v]=(0,l.useState)(null),[p,g]=(0,l.useState)(null),[j,N]=(0,l.useState)(1);(0,l.useEffect)(()=>{t(!0)},[]);let b=(0,l.useMemo)(()=>c.$Y.filter(e=>n.has(e.domain)),[n]),w=(0,l.useMemo)(()=>{let e=new Set;for(let t of b)e.add(t.source),e.add(t.target);return e},[b]),k=(0,l.useMemo)(()=>c.td.filter(e=>w.has(e.id)),[w]),C=function(e,t,n,s){let[a,i]=(0,l.useState)([]);return(0,l.useEffect)(()=>{let l=e.map((t,n)=>{let s=2*Math.PI*n/e.length;return{id:t.id,x:400+210*Math.cos(s)+(Math.random()-.5)*50,y:300+210*Math.sin(s)+(Math.random()-.5)*50,vx:0,vy:0,node:t,highlighted:!1}}),a=new Map(l.map(e=>[e.id,e]));for(let e=0;e<150;e++){let i=1-e/150,r=.1*i;for(let e=0;e<l.length;e++)for(let t=e+1;t<l.length;t++){let n=l[t].x-l[e].x,s=l[t].y-l[e].y,a=Math.sqrt(n*n+s*s)||1,i=800/(a*a),c=n/a*i,d=s/a*i;l[e].vx-=c*r,l[e].vy-=d*r,l[t].vx+=c*r,l[t].vy+=d*r}for(let e of t){let t=a.get(e.source),n=a.get(e.target);if(!t||!n)continue;let s=n.x-t.x,l=n.y-t.y,i=Math.sqrt(s*s+l*l)||1,c=(i-120)*.01,d=s/i*c,o=l/i*c;t.vx+=d*r,t.vy+=o*r,n.vx-=d*r,n.vy-=o*r}for(let e of l)e.vx+=(400-e.x)*.001*i,e.vy+=(300-e.y)*.001*i;for(let e of l)e.vx*=.8,e.vy*=.8,e.x+=e.vx,e.y+=e.vy,e.x=Math.max(40,Math.min(n-40,e.x)),e.y=Math.max(40,Math.min(s-40,e.y))}i([...l])},[e,t,n,s]),a}(k,b,800,600),M=(0,l.useMemo)(()=>{let e=new Map;for(let t of C)e.set(t.id,{x:t.x,y:t.y});return e},[C]),E=(0,l.useMemo)(()=>{if(!y)return new Set;let e=new Set;for(let t of b)(t.source===y||t.target===y)&&e.add(t.id);return e},[y,b]),S=e=>{let t=new Set(n);t.has(e)?t.delete(e):t.add(e),d(t)};if(!e)return(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-pulse text-teal-500",children:"Loading..."})});let z=y?c.td.find(e=>e.id===y):null,F=y?c.$Y.filter(e=>e.source===y||e.target===y):[];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.Z,{}),(0,s.jsxs)("main",{className:"mx-auto max-w-7xl px-4 py-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-navy-800 dark:text-white",children:"Causal Knowledge Graph"}),(0,s.jsx)("p",{className:"text-navy-500 dark:text-navy-300",children:"Interactive visualization of 107 NCD-CIE causal edges"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,s.jsx)(o,{className:"h-4 w-4 text-navy-500"}),["CVD","T2DM","CKD","Shared","Intervention"].map(e=>(0,s.jsx)(r.z,{variant:n.has(e)?"default":"outline",size:"sm",onClick:()=>S(e),style:n.has(e)?{backgroundColor:f[e]}:void 0,children:e},e)),(0,s.jsxs)("div",{className:"ml-auto flex gap-2",children:[(0,s.jsx)(r.z,{variant:"outline",size:"icon",onClick:()=>N(e=>Math.min(e+.2,2)),children:(0,s.jsx)(u,{className:"h-4 w-4"})}),(0,s.jsx)(r.z,{variant:"outline",size:"icon",onClick:()=>N(e=>Math.max(e-.2,.5)),children:(0,s.jsx)(x,{className:"h-4 w-4"})}),(0,s.jsx)(r.z,{variant:"outline",size:"icon",onClick:()=>{N(1),v(null)},children:(0,s.jsx)(h.Z,{className:"h-4 w-4"})})]})]}),(0,s.jsxs)("div",{className:"grid lg:grid-cols-4 gap-6",children:[(0,s.jsx)("div",{className:"lg:col-span-3",children:(0,s.jsx)(i.Zb,{className:"overflow-hidden",children:(0,s.jsx)(i.aY,{className:"p-0",children:(0,s.jsxs)("div",{className:"relative overflow-hidden",style:{height:"600px"},children:[(0,s.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 800 600",className:"bg-navy-50/30 dark:bg-navy-900/50",style:{transform:"scale(".concat(j,")"),transformOrigin:"center"},onClick:()=>v(null),children:[b.map(e=>{let t=M.get(e.source),n=M.get(e.target);if(!t||!n)return null;let l=E.has(e.id),a=6*Math.abs(e.weight)+1;return(0,s.jsxs)("g",{children:[(0,s.jsx)("line",{x1:t.x,y1:t.y,x2:n.x,y2:n.y,stroke:e.weight>0?"#EF4444":"#22C55E",strokeWidth:a,opacity:y?l?1:.1:.4,strokeLinecap:"round",onMouseEnter:()=>g(e),onMouseLeave:()=>g(null),className:"cursor-pointer"}),l&&(0,s.jsx)("polygon",{points:(()=>{let e=n.x-t.x,s=n.y-t.y,l=Math.sqrt(e*e+s*s)||1,a=e/l,i=s/l,r=n.x-20*a,c=n.y-20*i,d=-(5*i),o=5*a;return"".concat(n.x-14*a,",").concat(n.y-14*i," ").concat(r+d,",").concat(c+o," ").concat(r-d,",").concat(c-o)})(),fill:e.weight>0?"#EF4444":"#22C55E",opacity:.8})]},e.id)}),C.map(e=>{let t=M.get(e.id);if(!t)return null;let n=y===e.id,l=!y||E.size>0&&c.$Y.some(t=>t.source===y&&t.target===e.id||t.target===y&&t.source===e.id),a="disease"===e.node.type?18:12,i=f[e.node.domain]||"#6B7280";return(0,s.jsxs)("g",{onClick:t=>{t.stopPropagation(),v(n?null:e.id)},className:"cursor-pointer",opacity:y?n||l?1:.2:1,children:[(0,s.jsx)("circle",{cx:t.x,cy:t.y,r:a,fill:i,stroke:n?"#0EA5E9":"white",strokeWidth:n?3:2}),(0,s.jsx)("text",{x:t.x,y:t.y+a+14,textAnchor:"middle",fontSize:10,fill:"#374151",className:"dark:fill-navy-200 pointer-events-none select-none",fontWeight:n?700:500,children:e.node.label})]},e.id)})]}),p&&(0,s.jsxs)("div",{className:"absolute top-4 left-4 bg-navy-800 text-white p-3 rounded-lg shadow-xl text-xs max-w-xs z-10",children:[(0,s.jsxs)("div",{className:"font-semibold",children:[p.source," → ",p.target]}),(0,s.jsxs)("div",{children:["Weight: ",(0,s.jsx)("span",{className:p.weight>0?"text-red-400":"text-green-400",children:p.weight.toFixed(2)})]}),(0,s.jsxs)("div",{children:["95% CI: [",p.ci[0].toFixed(2),", ",p.ci[1].toFixed(2),"]"]}),(0,s.jsxs)("div",{children:["Evidence: Grade ",p.evidenceGrade]}),(0,s.jsx)("div",{className:"mt-1 text-navy-300",children:p.description})]})]})})})}),(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{className:"pb-3",children:(0,s.jsx)(i.ll,{className:"text-sm",children:"Legend"})}),(0,s.jsxs)(i.aY,{className:"space-y-3 text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"Domains"}),Object.entries(f).map(e=>{let[t,n]=e;return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n}}),(0,s.jsx)("span",{children:t})]},t)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium mb-1",children:"Edge Colors"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-0.5 bg-red-500"}),(0,s.jsx)("span",{children:"Risk (+)"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-0.5 bg-green-500"}),(0,s.jsx)("span",{children:"Protective (−)"})]})]}),(0,s.jsxs)("div",{className:"text-navy-400",children:["Edge thickness = weight strength",(0,s.jsx)("br",{}),"Node size: large = disease endpoint"]})]})]}),z&&(0,s.jsxs)(i.Zb,{children:[(0,s.jsxs)(i.Ol,{className:"pb-3",children:[(0,s.jsxs)(i.ll,{className:"text-sm flex items-center gap-2",children:[(0,s.jsx)(m,{className:"h-4 w-4"})," ",z.label]}),(0,s.jsx)(i.SZ,{className:"text-xs",children:z.description})]}),(0,s.jsxs)(i.aY,{className:"space-y-2 text-xs",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Type:"})," ",z.type]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Domain:"})," ",z.domain]}),z.unit&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium",children:"Unit:"})," ",z.unit]}),(0,s.jsxs)("div",{className:"font-medium mt-2",children:["Connected Edges (",F.length,"):"]}),(0,s.jsx)("div",{className:"max-h-64 overflow-y-auto space-y-1",children:F.map(e=>(0,s.jsxs)("div",{className:"p-2 rounded bg-navy-50 dark:bg-navy-700/50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{children:e.source===y?"→":"←"}),(0,s.jsx)("span",{className:"font-medium",children:e.source===y?e.target:e.source}),(0,s.jsxs)("span",{className:"ml-auto font-mono ".concat(e.weight>0?"text-red-500":"text-green-600"),children:[e.weight>0?"+":"",e.weight.toFixed(2)]})]}),(0,s.jsxs)("div",{className:"text-navy-400 mt-0.5",children:["Grade ",e.evidenceGrade," \xb7 CI [",e.ci[0].toFixed(2),", ",e.ci[1].toFixed(2),"]"]})]},e.id))})]})]}),(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"pt-6 text-xs space-y-1",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-navy-500",children:"Total Nodes"}),(0,s.jsx)("span",{className:"font-medium",children:c.td.length})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-navy-500",children:"Total Edges"}),(0,s.jsx)("span",{className:"font-medium",children:c.$Y.length})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-navy-500",children:"Visible Nodes"}),(0,s.jsx)("span",{className:"font-medium",children:k.length})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-navy-500",children:"Visible Edges"}),(0,s.jsx)("span",{className:"font-medium",children:b.length})]})]})})]})]})]})]})}},12381:function(e,t,n){"use strict";n.d(t,{z:function(){return d}});var s=n(57437),l=n(2265),a=n(37053),i=n(90535),r=n(93448);let c=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-teal-500 text-white hover:bg-teal-600 shadow-sm",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-navy-200 bg-white hover:bg-navy-50 text-navy-800 dark:border-navy-600 dark:bg-navy-800 dark:hover:bg-navy-700 dark:text-white",secondary:"bg-navy-100 text-navy-800 hover:bg-navy-200 dark:bg-navy-700 dark:text-white",ghost:"hover:bg-navy-100 dark:hover:bg-navy-700",link:"text-teal-500 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,t)=>{let{className:n,variant:l,size:i,asChild:d=!1,...o}=e,u=d?a.g7:"button";return(0,s.jsx)(u,{className:(0,r.cn)(c({variant:l,size:i,className:n})),ref:t,...o})});d.displayName="Button"},98575:function(e,t,n){"use strict";n.d(t,{F:function(){return a},e:function(){return i}});var s=n(2265);function l(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}function a(...e){return t=>{let n=!1,s=e.map(e=>{let s=l(e,t);return n||"function"!=typeof s||(n=!0),s});if(n)return()=>{for(let t=0;t<s.length;t++){let n=s[t];"function"==typeof n?n():l(e[t],null)}}}}function i(...e){return s.useCallback(a(...e),e)}},37053:function(e,t,n){"use strict";n.d(t,{g7:function(){return o}});var s,l=n(2265),a=n(98575),i=n(57437),r=Symbol.for("react.lazy"),c=(s||(s=n.t(l,2)))[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===r&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}var o=function(e){let t=function(e){let t=l.forwardRef((e,t)=>{let{children:n,...s}=e;if(d(n)&&"function"==typeof c&&(n=c(n._payload)),l.isValidElement(n)){var i;let e,r;let c=(i=n,(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.ref:(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?i.props.ref:i.props.ref||i.ref),d=function(e,t){let n={...t};for(let s in t){let l=e[s],a=t[s];/^on[A-Z]/.test(s)?l&&a?n[s]=(...e)=>{let t=a(...e);return l(...e),t}:l&&(n[s]=l):"style"===s?n[s]={...l,...a}:"className"===s&&(n[s]=[l,a].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==l.Fragment&&(d.ref=t?(0,a.F)(t,c):c),l.cloneElement(n,d)}return l.Children.count(n)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=l.forwardRef((e,n)=>{let{children:s,...a}=e;d(s)&&"function"==typeof c&&(s=c(s._payload));let r=l.Children.toArray(s),o=r.find(x);if(o){let e=o.props.children,s=r.map(t=>t!==o?t:l.Children.count(e)>1?l.Children.only(null):l.isValidElement(e)?e.props.children:null);return(0,i.jsx)(t,{...a,ref:n,children:l.isValidElement(e)?l.cloneElement(e,void 0,s):null})}return(0,i.jsx)(t,{...a,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}("Slot"),u=Symbol("radix.slottable");function x(e){return l.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}},90535:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var s=n(61994);let l=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,a=s.W,i=(e,t)=>n=>{var s;if((null==t?void 0:t.variants)==null)return a(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:i,defaultVariants:r}=t,c=Object.keys(i).map(e=>{let t=null==n?void 0:n[e],s=null==r?void 0:r[e];if(null===t)return null;let a=l(t)||l(s);return i[e][a]}),d=n&&Object.entries(n).reduce((e,t)=>{let[n,s]=t;return void 0===s||(e[n]=s),e},{});return a(e,c,null==t?void 0:null===(s=t.compoundVariants)||void 0===s?void 0:s.reduce((e,t)=>{let{class:n,className:s,...l}=t;return Object.entries(l).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...r,...d}[t]):({...r,...d})[t]===n})?[...e,n,s]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}}},function(e){e.O(0,[54,934,971,117,744],function(){return e(e.s=40266)}),_N_E=e.O()}]);