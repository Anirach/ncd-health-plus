(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{46046:function(e,t,a){Promise.resolve().then(a.bind(a,9774))},9774:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var n=a(57437),i=a(2265),l=a(34768),s=a(79820),r=a(12381),o=a(94589),c=a(92371),d=a(95622),u=a(39763);let m=(0,u.Z)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),f=(0,u.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);var h=a(69076);let b=[{title:"Demographics",fields:[{key:"age",label:"Age",unit:"years",min:18,max:100,step:1},{key:"sex",label:"Sex",type:"select",options:[{value:0,label:"Female"},{value:1,label:"Male"}]}]},{title:"Blood Pressure",fields:[{key:"sbp",label:"Systolic BP",unit:"mmHg",min:80,max:220,step:1},{key:"dbp",label:"Diastolic BP",unit:"mmHg",min:40,max:140,step:1}]},{title:"Lipid Panel",fields:[{key:"ldl",label:"LDL-C",unit:"mg/dL",min:30,max:300,step:1},{key:"hdl",label:"HDL-C",unit:"mg/dL",min:15,max:100,step:1},{key:"tc",label:"Total Cholesterol",unit:"mg/dL",min:100,max:400,step:1},{key:"tg",label:"Triglycerides",unit:"mg/dL",min:30,max:500,step:1}]},{title:"Glycemic",fields:[{key:"hba1c",label:"HbA1c",unit:"%",min:3.5,max:14,step:.1},{key:"fpg",label:"Fasting Glucose",unit:"mg/dL",min:50,max:300,step:1}]},{title:"Renal & Anthropometric",fields:[{key:"egfr",label:"eGFR",unit:"mL/min/1.73m\xb2",min:10,max:130,step:1},{key:"bmi",label:"BMI",unit:"kg/m\xb2",min:14,max:50,step:.1}]},{title:"Lifestyle",fields:[{key:"smoking",label:"Smoking",type:"select",options:[{value:0,label:"Never"},{value:.5,label:"Former"},{value:1,label:"Current"}]},{key:"exercise",label:"Exercise",unit:"days/week",min:0,max:7,step:1},{key:"alcohol",label:"Alcohol",type:"select",options:[{value:0,label:"None"},{value:.5,label:"Moderate"},{value:1,label:"Heavy"}]},{key:"diet",label:"Diet Quality",unit:"0-1",min:0,max:1,step:.1}]}],p=[{key:"statin",label:"Statin"},{key:"htn_med",label:"Antihypertensive"},{key:"sglt2i",label:"SGLT2 Inhibitor"},{key:"metformin",label:"Metformin"},{key:"aspirin",label:"Aspirin"},{key:"ace_arb",label:"ACEi/ARB"}];function g(){let[e,t]=(0,i.useState)([]),[a,u]=(0,i.useState)(""),[g,x]=(0,i.useState)(null),[y,v]=(0,i.useState)(!1),[k,w]=(0,i.useState)(!1);(0,i.useEffect)(()=>{v(!0);let e=(0,c.eq)();t(e);let a=(0,c.wg)();u(a);let n=e.find(e=>e.id===a)||e[0];n&&x({...n})},[]);let j=t=>{u(t),(0,c.Yg)(t);let a=e.find(e=>e.id===t);a&&x({...a})},N=(e,t)=>{g&&x({...g,[e]:t})};return y&&g?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)("main",{className:"mx-auto max-w-7xl px-4 py-6 space-y-6",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-navy-800 dark:text-white",children:"Patient Profile"}),(0,n.jsx)("p",{className:"text-navy-500 dark:text-navy-300",children:"Enter or update patient data"})]}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.map(e=>(0,n.jsx)(r.z,{variant:e.id===a?"default":"outline",size:"sm",onClick:()=>j(e.id),children:e.name.split(" ")[0]},e.id)),(0,n.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>{let a={...d.wE[1],id:"patient-".concat(Date.now()),name:"Patient ".concat(e.length+1)},n=[...e,a];t(n),(0,c.bo)(n),j(a.id)},children:[(0,n.jsx)(m,{className:"h-4 w-4 mr-1"})," New"]})]})]}),(0,n.jsx)(s.Zb,{children:(0,n.jsx)(s.aY,{className:"pt-6",children:(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("label",{className:"text-sm font-medium w-20",children:"Name"}),(0,n.jsx)("input",{type:"text",value:g.name,onChange:e=>x({...g,name:e.target.value}),className:"flex-1 rounded-lg border border-navy-200 px-3 py-2 text-sm bg-white dark:bg-navy-800 dark:border-navy-600 focus:outline-none focus:ring-2 focus:ring-teal-500"})]})})}),(0,n.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[b.map(e=>(0,n.jsxs)(s.Zb,{children:[(0,n.jsx)(s.Ol,{className:"pb-3",children:(0,n.jsx)(s.ll,{className:"text-base",children:e.title})}),(0,n.jsx)(s.aY,{className:"space-y-4",children:e.fields.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("label",{className:"text-sm font-medium w-32 text-navy-600 dark:text-navy-300",children:e.label}),"select"===e.type?(0,n.jsx)("select",{value:g[e.key],onChange:t=>N(e.key,parseFloat(t.target.value)),className:"flex-1 rounded-lg border border-navy-200 px-3 py-2 text-sm bg-white dark:bg-navy-800 dark:border-navy-600 focus:outline-none focus:ring-2 focus:ring-teal-500",children:e.options.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,n.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,n.jsx)("input",{type:"number",value:g[e.key],onChange:t=>N(e.key,parseFloat(t.target.value)||0),min:e.min,max:e.max,step:e.step,className:"w-24 rounded-lg border border-navy-200 px-3 py-2 text-sm bg-white dark:bg-navy-800 dark:border-navy-600 focus:outline-none focus:ring-2 focus:ring-teal-500"}),e.unit&&(0,n.jsx)("span",{className:"text-xs text-navy-400",children:e.unit})]})]},e.key))})]},e.title)),(0,n.jsxs)(s.Zb,{children:[(0,n.jsx)(s.Ol,{className:"pb-3",children:(0,n.jsx)(s.ll,{className:"text-base",children:"Current Medications"})}),(0,n.jsx)(s.aY,{className:"space-y-4",children:p.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("label",{className:"text-sm font-medium text-navy-600 dark:text-navy-300",children:e.label}),(0,n.jsx)(o.r,{checked:1===g[e.key],onCheckedChange:t=>N(e.key,t?1:0)})]},e.key))})]})]}),(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsxs)(r.z,{onClick:()=>{if(!g)return;let a=e.map(e=>e.id===g.id?g:e);t(a),(0,c.bo)(a),(0,c.bY)(g.id,g),w(!0),setTimeout(()=>w(!1),2e3)},className:"flex items-center gap-2",children:[(0,n.jsx)(f,{className:"h-4 w-4"}),k?"âœ“ Saved!":"Save & Record Visit"]}),(0,n.jsxs)(r.z,{variant:"outline",onClick:()=>{let e=d.wE.find(e=>e.id===a);e&&x({...e})},className:"flex items-center gap-2",children:[(0,n.jsx)(h.Z,{className:"h-4 w-4"}),"Reset to Demo"]})]})]})]}):(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)("div",{className:"animate-pulse text-teal-500",children:"Loading..."})})}},12381:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var n=a(57437),i=a(2265),l=a(37053),s=a(90535),r=a(93448);let o=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-lg text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-teal-500 text-white hover:bg-teal-600 shadow-sm",destructive:"bg-red-500 text-white hover:bg-red-600",outline:"border border-navy-200 bg-white hover:bg-navy-50 text-navy-800 dark:border-navy-600 dark:bg-navy-800 dark:hover:bg-navy-700 dark:text-white",secondary:"bg-navy-100 text-navy-800 hover:bg-navy-200 dark:bg-navy-700 dark:text-white",ghost:"hover:bg-navy-100 dark:hover:bg-navy-700",link:"text-teal-500 underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,t)=>{let{className:a,variant:i,size:s,asChild:c=!1,...d}=e,u=c?l.g7:"button";return(0,n.jsx)(u,{className:(0,r.cn)(o({variant:i,size:s,className:a})),ref:t,...d})});c.displayName="Button"},94589:function(e,t,a){"use strict";a.d(t,{r:function(){return r}});var n=a(57437),i=a(2265),l=a(50721),s=a(93448);let r=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,n.jsx)(l.fC,{className:(0,s.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-teal-500 data-[state=unchecked]:bg-navy-200 dark:data-[state=unchecked]:bg-navy-600",a),...i,ref:t,children:(0,n.jsx)(l.bU,{className:(0,s.cn)("pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});r.displayName=l.fC.displayName},95622:function(e,t,a){"use strict";a.d(t,{Dh:function(){return p},JB:function(){return b},Pf:function(){return f},QP:function(){return h},gb:function(){return m},wE:function(){return g}});var n=a(7463);let i={age:{mean:55,std:12},sex:{mean:.5,std:.5},sbp:{mean:130,std:18},dbp:{mean:82,std:10},ldl:{mean:130,std:35},hdl:{mean:50,std:14},tc:{mean:210,std:40},tg:{mean:150,std:70},hba1c:{mean:5.8,std:.9},fpg:{mean:105,std:25},bmi:{mean:26,std:4.5},egfr:{mean:85,std:22},smoking:{mean:.25,std:.4},exercise:{mean:2.5,std:2},alcohol:{mean:.2,std:.3},diet:{mean:.5,std:.25},statin:{mean:.2,std:.4},htn_med:{mean:.3,std:.45},sglt2i:{mean:.05,std:.22},metformin:{mean:.15,std:.35},aspirin:{mean:.15,std:.35},ace_arb:{mean:.2,std:.4},diabetes:{mean:.15,std:.35},hypertension:{mean:.35,std:.48}},l={cad:-2.5,stroke:-3,hf:-3.2,pad:-3.5,t2dm:-2.8,ckd:-2.6,nafld:-2};function s(e){return 1/(1+Math.exp(-e))}function r(e,t){let a=i[e];return a?(t-a.mean)/a.std:0}function o(e){let t={...e};return t.diabetes=t.hba1c>=6.5||t.fpg>=126?1:t.hba1c>=5.7||t.fpg>=100?.5:0,t.hypertension=t.sbp>=140||t.dbp>=90?1:t.sbp>=130||t.dbp>=85?.5:0,t}function c(e,t){var a;return null!==(a=e[t])&&void 0!==a?a:0}function d(e,t){var a;let i=o(e),d=null!==(a=l[t])&&void 0!==a?a:-2.5,u=(0,n.FB)(t),m=d;for(let e of u){let t=c(i,e.source),a=r(e.source,t);m+=e.weight*a}return s(m)}function u(e,t){var a;let i=o(e),d=null!==(a=l[t])&&void 0!==a?a:-2.5,u=(0,n.FB)(t),m=d,f=d,h=d;for(let e of u){let t=c(i,e.source),a=r(e.source,t);m+=e.weight*a,a>=0?(f+=e.ci[0]*a,h+=e.ci[1]*a):(f+=e.ci[1]*a,h+=e.ci[0]*a)}return{value:s(m),ci_low:s(f),ci_high:s(h)}}function m(e){let t=d(e,"cad"),a=d(e,"stroke"),n=d(e,"hf"),i=d(e,"pad"),l=d(e,"t2dm"),s=d(e,"ckd"),r=d(e,"nafld"),o=1-(1-t)*(1-a)*(1-n)*(1-i);return{cad:t,stroke:a,hf:n,pad:i,t2dm:l,ckd:s,nafld:r,cvd_composite:o,ncd_composite:1-(1-o)*(1-l)*(1-s)}}function f(e){let t=u(e,"cad"),a=u(e,"stroke"),n=u(e,"hf"),i=u(e,"pad"),l=u(e,"t2dm"),s=u(e,"ckd"),r=u(e,"nafld"),o=1-(1-t.value)*(1-a.value)*(1-n.value)*(1-i.value),c=1-(1-t.ci_low)*(1-a.ci_low)*(1-n.ci_low)*(1-i.ci_low),d=1-(1-t.ci_high)*(1-a.ci_high)*(1-n.ci_high)*(1-i.ci_high),m=1-(1-o)*(1-l.value)*(1-s.value),f=1-(1-c)*(1-l.ci_low)*(1-s.ci_low),h=1-(1-d)*(1-l.ci_high)*(1-s.ci_high);return{cad:t,stroke:a,hf:n,pad:i,t2dm:l,ckd:s,nafld:r,cvd_composite:{value:o,ci_low:c,ci_high:d},ncd_composite:{value:m,ci_low:f,ci_high:h}}}function h(e,t){let a=o(e),i={},l={},s=[];for(let e of n._j)i[e]=c(a,e);for(let[e,a]of Object.entries(t))if(void 0!==a){let t=a-(i[e]||0);i[e]=a,l[e]=t}for(let e of n._j){if(t.hasOwnProperty(e))continue;let o=n.$Y.filter(t=>t.target===e),d=0;for(let e of o){var r;let l=(null!==(r=i[e.source])&&void 0!==r?r:0)-c(a,e.source);if(Math.abs(l)>.001){let a=4;for(let i of Object.keys(t))a=Math.min(a,function(e,t){let a=new Set,i=[{node:e,depth:0}];for(;i.length>0;){let{node:e,depth:l}=i.shift();if(e===t)return l;if(!(l>=3))for(let t of(a.add(e),n.$Y.filter(t=>t.source===e)))a.has(t.target)||i.push({node:t.target,depth:l+1})}return 4}(i,e.source)+1);if(a<=3){let t=Math.pow(.7,a),n=e.weight*l*t;d+=n,Math.abs(n)>.001&&s.push(e.id)}}}Math.abs(d)>.001&&(i[e]=c(a,e)+d,l[e]=d)}let d={...e,...t};for(let[e,n]of Object.entries(l))t.hasOwnProperty(e)||(d[e]=c(a,e)+n);for(let[e]of Object.entries(t))for(let t of n.$Y.filter(t=>t.source===e))s.push(t.id);let u=m(d);return{interventionProfile:d,risks:u,deltas:l,activatedEdges:Array.from(new Set(s))}}function b(e){return e<.1?"#22C55E":e<.2?"#EAB308":e<.3?"#F97316":"#EF4444"}function p(e){return e<.1?"Low":e<.2?"Moderate":e<.3?"High":"Very High"}let g=[{id:"demo-low",name:"Sarah Chen",age:40,sex:0,sbp:115,dbp:72,ldl:95,hdl:62,tc:185,tg:90,hba1c:5.2,fpg:88,bmi:22.5,egfr:105,smoking:0,exercise:5,alcohol:0,diet:.8,statin:0,htn_med:0,sglt2i:0,metformin:0,aspirin:0,ace_arb:0},{id:"demo-moderate",name:"James Wilson",age:55,sex:1,sbp:148,dbp:92,ldl:162,hdl:38,tc:245,tg:210,hba1c:6.1,fpg:112,bmi:29.5,egfr:78,smoking:0,exercise:1,alcohol:.5,diet:.4,statin:0,htn_med:0,sglt2i:0,metformin:0,aspirin:0,ace_arb:0},{id:"demo-high",name:"Robert Martinez",age:65,sex:1,sbp:168,dbp:98,ldl:185,hdl:32,tc:280,tg:290,hba1c:8.2,fpg:165,bmi:33.5,egfr:52,smoking:1,exercise:0,alcohol:.5,diet:.2,statin:0,htn_med:0,sglt2i:0,metformin:0,aspirin:0,ace_arb:0}]},92371:function(e,t,a){"use strict";a.d(t,{Yg:function(){return d},bY:function(){return m},bo:function(){return o},eq:function(){return r},td:function(){return u},wg:function(){return c}});var n=a(95622);let i="ncd-health-plus-patients",l="ncd-health-plus-active",s="ncd-health-plus-history";function r(){try{let e=localStorage.getItem(i);if(e)return JSON.parse(e)}catch(e){}return n.wE}function o(e){localStorage.setItem(i,JSON.stringify(e))}function c(){return localStorage.getItem(l)||"demo-moderate"}function d(e){localStorage.setItem(l,e)}function u(e){try{let t=localStorage.getItem("".concat(s,"-").concat(e));if(t)return JSON.parse(t)}catch(e){}return[]}function m(e,t){let a=u(e);a.push({date:new Date().toISOString().split("T")[0],profile:t}),localStorage.setItem("".concat(s,"-").concat(e),JSON.stringify(a))}}},function(e){e.O(0,[54,494,934,971,117,744],function(){return e(e.s=46046)}),_N_E=e.O()}]);